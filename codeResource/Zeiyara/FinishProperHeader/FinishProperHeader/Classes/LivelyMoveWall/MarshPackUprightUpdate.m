
#import <Foundation/Foundation.h>

NSString *StringFromPossiblyData(Byte *data);


//: icon_receiver_voice_playing_008
Byte coreHourPleaTitle[] = {8, 31, 12, 192, 33, 83, 132, 37, 218, 154, 165, 93, 56, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 97};

//: icon_receiver_voice_playing
Byte layoutAnalyzeEvent[] = {94, 27, 12, 170, 125, 42, 103, 156, 155, 155, 112, 137, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 177};

//: icon_receiver_voice_playing_002
Byte viewUndergoPreference[] = {86, 31, 5, 66, 41, 50, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 168};

//: icon_voice_plus_b
Byte moduleTooEvent[] = {52, 17, 9, 204, 110, 229, 84, 217, 76, 98, 95, 115, 117, 108, 112, 95, 101, 99, 105, 111, 118, 95, 110, 111, 99, 105, 159};

//: icon_receiver_voice_playing_005
Byte k_tractionTooTurnPreference[] = {9, 31, 3, 53, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 66};

//: icon_voice_play_b
Byte colorStandingReadingData[] = {94, 17, 10, 172, 14, 104, 214, 103, 39, 158, 98, 95, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 110, 111, 99, 105, 219};

//: icon_receiver_voice_playing_007
Byte themeThroatPath[] = {35, 31, 3, 55, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 78};

//: icon_receiver_voice_playing_001
Byte styleSpaceVisitorHelper[] = {84, 31, 13, 200, 74, 99, 175, 8, 114, 178, 18, 217, 13, 49, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 72};

//: icon_receiver_voice_playing_010
Byte appSpellConfig[] = {82, 31, 6, 81, 171, 200, 48, 49, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 19};

//: icon_receiver_voice_playing_003
Byte spacingAppearLogger[] = {32, 31, 5, 21, 100, 51, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 161};

//: icon_receiver_voice_playing_009
Byte coreRationalHelper[] = {17, 31, 6, 24, 13, 12, 57, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 95};

//: icon_receiver_voice_playing_w
Byte coreNeatAdvanceAlert[] = {75, 29, 11, 239, 9, 253, 191, 42, 230, 53, 41, 119, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 146};

//: FFFKitEventNameTapAudio
Byte k_ointmentContent[] = {37, 23, 7, 156, 85, 41, 96, 111, 105, 100, 117, 65, 112, 97, 84, 101, 109, 97, 78, 116, 110, 101, 118, 69, 116, 105, 75, 70, 70, 70, 122};

//: icon_receiver_voice_playing_006
Byte appOweVegetableLogger[] = {1, 31, 5, 73, 129, 54, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 151};

//: icon_receiver_voice_playing_004
Byte k_rinkKey[] = {96, 31, 13, 140, 18, 109, 26, 187, 76, 151, 182, 206, 221, 52, 48, 48, 95, 103, 110, 105, 121, 97, 108, 112, 95, 101, 99, 105, 111, 118, 95, 114, 101, 118, 105, 101, 99, 101, 114, 95, 110, 111, 99, 105, 31};

// __DEBUG__
// __CLOSE_PRINT__
//
//  SessionAudioCententView.m
//  NIMDemo
//
//  Created by chris.
//  Copyright (c) 2015年 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "MarshPackUprightUpdate.h"
#import "MarshPackUprightUpdate.h"
//: #import "TextSearchLoad.h"
#import "TextSearchLoad.h"
//: #import "ParcelReplayAngleCollectionMight.h"
#import "ParcelReplayAngleCollectionMight.h"
//: #import "UIImage+QuintessentialContentTreat.h"
#import "UIImage+QuintessentialContentTreat.h"
//: #import "FixPainterSlip.h"
#import "FixPainterSlip.h"
//: #import "QuintessentialContentTreat.h"
#import "QuintessentialContentTreat.h"
//: #import "UIColor+QuintessentialContentTreat.h"
#import "UIColor+QuintessentialContentTreat.h"

//: @interface MarshPackUprightUpdate()<NIMMediaManagerDelegate>
@interface MarshPackUprightUpdate()<NIMMediaManagerDelegate>

//: @property (nonatomic,strong) UIImageView *voiceImageView;
@property (nonatomic,strong) UIImageView *passingComplex;
//: @property (nonatomic,strong) UIImageView *voiceImageViewleft;
@property (nonatomic,strong) UIImageView *earlier;

//: @property (nonatomic,strong) UILabel *durationLabel;
@property (nonatomic,strong) UILabel *twentyFourHourPeriodLabel;
//: @property (nonatomic,strong) UIImageView *voicePlayViewleft;
@property (nonatomic,strong) UIImageView *playViewleftSingingVoice;

//: @property (nonatomic,strong) UIImageView *voicePlayView;
@property (nonatomic,strong) UIImageView *range;

//: @end
@end

//: @implementation MarshPackUprightUpdate
@implementation MarshPackUprightUpdate

//: - (void)refresh:(ParcelReplayAngleCollectionMight *)data {
- (void)shadow:(ParcelReplayAngleCollectionMight *)data {
    //: [super refresh:data];
    [super shadow:data];
    //: NIMAudioObject *object = self.model.message.messageObject;
    NIMAudioObject *object = self.angle.role.messageObject;
    //: self.durationLabel.text = [NSString stringWithFormat:@"%zd\"",(NSInteger)((object.duration+500)/1000)];
    self.twentyFourHourPeriodLabel.text = [NSString stringWithFormat:@"%zd\"",(NSInteger)((object.duration+500)/1000)];//四舍五入

    //: OriginalTupleWorkflowAnimator *setting = [[QuintessentialContentTreat sharedKit].config setting:data.message];
    OriginalTupleWorkflowAnimator *setting = [[QuintessentialContentTreat pair].ruminate domain:data.role];

    //: self.durationLabel.font = setting.font;
    self.twentyFourHourPeriodLabel.font = setting.netFont;
    //: self.durationLabel.textColor = setting.textColor;
    self.twentyFourHourPeriodLabel.textColor = setting.aRest;
    //: [self.durationLabel sizeToFit];
    [self.twentyFourHourPeriodLabel sizeToFit];

    //: [self setPlaying:self.isPlaying];
    [self setTap:self.chromosphere];
    //: [self refreshBackground:data];
    [self time:data];
}

//: - (BOOL)isPlaying
- (BOOL)chromosphere
{
    //: BOOL play = [FixPainterSlip instance].currentPlayingMessage == self.model.message; 
    BOOL play = [FixPainterSlip coreferent].suspend == self.angle.role; //对比是否是同一条消息，严格同一条，不能是相同ID，防止进了会话又进云端消息界面，导致同一个ID的云消息也在动画
    //: return play;
    return play;
}

//: #pragma mark - NIMMediaManagerDelegate
#pragma mark - NIMMediaManagerDelegate

//: - (void)playAudio:(NSString *)filePath didBeganWithError:(NSError *)error {
- (void)playAudio:(NSString *)filePath didBeganWithError:(NSError *)error {
    //: if(filePath && !error) {
    if(filePath && !error) {
        //: if (self.isPlaying && [self.audioUIDelegate respondsToSelector:@selector(startPlayingAudioUI)]) {
        if (self.chromosphere && [self.necessaryCur respondsToSelector:@selector(bindImpress)]) {
            //: [self.audioUIDelegate startPlayingAudioUI];
            [self.necessaryCur bindImpress];
        }
    }
}

//: - (void)dealloc
- (void)dealloc
{
    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    //: [[NIMSDK sharedSDK].mediaManager removeDelegate:self];
    [[NIMSDK sharedSDK].mediaManager removeDelegate:self];
}

//: - (void)setPlaying:(BOOL)isPlaying
- (void)setTap:(BOOL)isPlaying
{
    //: if (isPlaying) {
    if (isPlaying) {
        //: [self.voiceImageView startAnimating];
        [self.passingComplex startAnimating];
        //: [self.voiceImageViewleft startAnimating];
        [self.earlier startAnimating];
        //: _voicePlayViewleft.image = [UIImage imageNamed:@"icon_voice_plus_b"];
        _playViewleftSingingVoice.image = [UIImage imageNamed:StringFromPossiblyData(moduleTooEvent)];
//        _voicePlayView.image = [UIImage imageNamed:@"icon_voice_plus_w"];
        //: _voicePlayView.image = [UIImage imageNamed:@"icon_voice_plus_b"];
        _range.image = [UIImage imageNamed:StringFromPossiblyData(moduleTooEvent)];
    //: }else{
    }else{
        //: [self.voiceImageView stopAnimating];
        [self.passingComplex stopAnimating];
        //: [self.voiceImageViewleft stopAnimating];
        [self.earlier stopAnimating];
        //: _voicePlayViewleft.image = [UIImage imageNamed:@"icon_voice_play_b"];
        _playViewleftSingingVoice.image = [UIImage imageNamed:StringFromPossiblyData(colorStandingReadingData)];
//        _voicePlayView.image = [UIImage imageNamed:@"icon_voice_play_w"];
        //: _voicePlayView.image = [UIImage imageNamed:@"icon_voice_play_b"];
        _range.image = [UIImage imageNamed:StringFromPossiblyData(colorStandingReadingData)];
    }
}

//: - (void)addVoiceView{
- (void)request{
    //: _audioBackgroundView = [[UIView alloc] initWithFrame:CGRectZero];
    _elliptic = [[UIView alloc] initWithFrame:CGRectZero];
    //: _audioBackgroundView.layer.cornerRadius = 16.f;
    _elliptic.layer.cornerRadius = 16.f;
    //: _audioBackgroundView.userInteractionEnabled = NO;
    _elliptic.userInteractionEnabled = NO;
    //: [self addSubview:_audioBackgroundView];
    [self addSubview:_elliptic];


    //: _voicePlayViewleft = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"icon_voice_play_b"]];
    _playViewleftSingingVoice = [[UIImageView alloc]initWithImage:[UIImage imageNamed:StringFromPossiblyData(colorStandingReadingData)]];
    //: [self addSubview:_voicePlayViewleft];
    [self addSubview:_playViewleftSingingVoice];
    //: _voicePlayViewleft.hidden = YES;
    _playViewleftSingingVoice.hidden = YES;
    //: _voicePlayView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"icon_voice_play_b"]];
    _range = [[UIImageView alloc]initWithImage:[UIImage imageNamed:StringFromPossiblyData(colorStandingReadingData)]];
    //: [self addSubview:_voicePlayView];
    [self addSubview:_range];
    //: _voicePlayView.hidden = YES;
    _range.hidden = YES;

    //: UIImage *image = [UIImage imageNamed:@"icon_receiver_voice_playing_w"];
    UIImage *image = [UIImage imageNamed:StringFromPossiblyData(coreNeatAdvanceAlert)];
    //: _voiceImageView = [[UIImageView alloc] initWithImage:image];
    _passingComplex = [[UIImageView alloc] initWithImage:image];
    //: NSArray *animateNames = @[@"icon_receiver_voice_playing_001",@"icon_receiver_voice_playing_002",@"icon_receiver_voice_playing_003",@"icon_receiver_voice_playing_004",@"icon_receiver_voice_playing_005",@"icon_receiver_voice_playing_006",@"icon_receiver_voice_playing_007",@"icon_receiver_voice_playing_008",@"icon_receiver_voice_playing_009",@"icon_receiver_voice_playing_010"];
    NSArray *animateNames = @[StringFromPossiblyData(styleSpaceVisitorHelper),StringFromPossiblyData(viewUndergoPreference),StringFromPossiblyData(spacingAppearLogger),StringFromPossiblyData(k_rinkKey),StringFromPossiblyData(k_tractionTooTurnPreference),StringFromPossiblyData(appOweVegetableLogger),StringFromPossiblyData(themeThroatPath),StringFromPossiblyData(coreHourPleaTitle),StringFromPossiblyData(coreRationalHelper),StringFromPossiblyData(appSpellConfig)];
    //: NSMutableArray * animationImages = [[NSMutableArray alloc] initWithCapacity:animateNames.count];
    NSMutableArray * animationImages = [[NSMutableArray alloc] initWithCapacity:animateNames.count];
    //: for (NSString * animateName in animateNames) {
    for (NSString * animateName in animateNames) {
        //: UIImage * animateImage = [UIImage imageNamed:animateName];
        UIImage * animateImage = [UIImage imageNamed:animateName];
        //: [animationImages addObject:animateImage];
        [animationImages addObject:animateImage];
    }
    //: _voiceImageView.animationImages = animationImages;
    _passingComplex.animationImages = animationImages;
    //: _voiceImageView.animationDuration = 1.0;
    _passingComplex.animationDuration = 1.0;
    //: [self addSubview:_voiceImageView];
    [self addSubview:_passingComplex];
    //: _voiceImageView.hidden = YES;
    _passingComplex.hidden = YES;

    //: _voiceImageViewleft = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon_receiver_voice_playing"]];
    _earlier = [[UIImageView alloc] initWithImage:[UIImage imageNamed:StringFromPossiblyData(layoutAnalyzeEvent)]];
    //: NSArray *animateNames2 = @[@"icon_receiver_voice_playing_001",@"icon_receiver_voice_playing_002",@"icon_receiver_voice_playing_003",@"icon_receiver_voice_playing_004",@"icon_receiver_voice_playing_005",@"icon_receiver_voice_playing_006",@"icon_receiver_voice_playing_007",@"icon_receiver_voice_playing_008",@"icon_receiver_voice_playing_009",@"icon_receiver_voice_playing_010"];
    NSArray *animateNames2 = @[StringFromPossiblyData(styleSpaceVisitorHelper),StringFromPossiblyData(viewUndergoPreference),StringFromPossiblyData(spacingAppearLogger),StringFromPossiblyData(k_rinkKey),StringFromPossiblyData(k_tractionTooTurnPreference),StringFromPossiblyData(appOweVegetableLogger),StringFromPossiblyData(themeThroatPath),StringFromPossiblyData(coreHourPleaTitle),StringFromPossiblyData(coreRationalHelper),StringFromPossiblyData(appSpellConfig)];
    //: NSMutableArray *animationImages2 = [[NSMutableArray alloc] initWithCapacity:animateNames2.count];
    NSMutableArray *animationImages2 = [[NSMutableArray alloc] initWithCapacity:animateNames2.count];
    //: for (NSString *animateName2 in animateNames2) {
    for (NSString *animateName2 in animateNames2) {
        //: UIImage *animateImage2 = [UIImage imageNamed:animateName2];
        UIImage *animateImage2 = [UIImage imageNamed:animateName2];
        //: [animationImages2 addObject:animateImage2];
        [animationImages2 addObject:animateImage2];
    }
    //: _voiceImageViewleft.animationImages = animationImages2;
    _earlier.animationImages = animationImages2;
    //: _voiceImageViewleft.animationDuration = 1.0;
    _earlier.animationDuration = 1.0;
    //: [self addSubview:_voiceImageViewleft];
    [self addSubview:_earlier];
    //: _voiceImageViewleft.hidden = YES;
    _earlier.hidden = YES;

    //: _durationLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    _twentyFourHourPeriodLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    //: _durationLabel.backgroundColor = [UIColor clearColor];
    _twentyFourHourPeriodLabel.backgroundColor = [UIColor clearColor];
    //: [self addSubview:_durationLabel];
    [self addSubview:_twentyFourHourPeriodLabel];

}

//: -(instancetype)initSessionMessageContentView{
-(instancetype)initRational{
    //: self = [super initSessionMessageContentView];
    self = [super initRational];
    //: if (self) {
    if (self) {
        //: [self addVoiceView];
        [self request];
        //: [[NIMSDK sharedSDK].mediaManager addDelegate:self];
        [[NIMSDK sharedSDK].mediaManager addDelegate:self];
    }
    //: return self;
    return self;
}

//: #pragma mark - private methods
#pragma mark - private methods
//: - (void)stopPlayingUI
- (void)phaseLate
{
    //: [self setPlaying:NO];
    [self setTap:NO];
}

//: - (void)layoutSubviews{
- (void)layoutSubviews{
    //: [super layoutSubviews];
    [super layoutSubviews];
    //: UIEdgeInsets contentInsets = self.model.contentViewInsets;
    UIEdgeInsets contentInsets = self.angle.beyond;
    //: switch (self.layoutStyle) {
    switch (self.recognize) {
        //: case ClassFactoryLoaderLayoutLeft: {
        case ClassFactoryLoaderLayoutLeft: {
//            _voiceImageView.transform = CGAffineTransformIdentity;
//            self.voiceImageView.left = contentInsets.left * 2;
            //: self.voiceImageViewleft.left = contentInsets.left * 2;
            self.earlier.thePlayerThumb = contentInsets.left * 2;
             //: _durationLabel.right = self.width - contentInsets.right * 2;
             _twentyFourHourPeriodLabel.wing = self.suspendMerge - contentInsets.right * 2;
            //: break;
            break;
        }
        //: case ClassFactoryLoaderLayoutRight: {
        case ClassFactoryLoaderLayoutRight: {
//            _voiceImageView.transform = CGAffineTransformMakeRotation(M_PI);
            //: self.voiceImageView.right = self.width - contentInsets.right * 2;
            self.passingComplex.wing = self.suspendMerge - contentInsets.right * 2;
            //: _durationLabel.left = contentInsets.left;
            _twentyFourHourPeriodLabel.thePlayerThumb = contentInsets.left;
            //: break;
            break;
        }
        //: case ClassFactoryLoaderLayoutAuto:
        case ClassFactoryLoaderLayoutAuto:
        //: default:
        default:
        {
            //: if (self.model.message.isOutgoingMsg) {
            if (self.angle.role.isOutgoingMsg) {
//                _voiceImageView.transform = CGAffineTransformMakeRotation(M_PI);


                //: self.voicePlayView.left = contentInsets.left;
                self.range.thePlayerThumb = contentInsets.left;
                //: self.voiceImageView.left = self.voicePlayView.right+10;
                self.passingComplex.thePlayerThumb = self.range.wing+10;
                //: _durationLabel.left = self.voiceImageView.right+10;
                _twentyFourHourPeriodLabel.thePlayerThumb = self.passingComplex.wing+10;

            //: } else {
            } else {
//                _voiceImageView.transform = CGAffineTransformIdentity;
//               self.voiceImageView.left = contentInsets.left;

                //: self.voicePlayViewleft.left = contentInsets.left;
                self.playViewleftSingingVoice.thePlayerThumb = contentInsets.left;
                //: self.voiceImageViewleft.left = self.voicePlayViewleft.right+10;
                self.earlier.thePlayerThumb = self.playViewleftSingingVoice.wing+10;
                //: _durationLabel.left = self.voiceImageViewleft.right+10;
                _twentyFourHourPeriodLabel.thePlayerThumb = self.earlier.wing+10;
            }
            //: break;
            break;
        }
    }
    //: _voiceImageView.width = 62;
    _passingComplex.suspendMerge = 62;
    //: _voiceImageView.height = 18;
    _passingComplex.screenTransaction = 18;
    //: _voiceImageView.centerY = self.height * .5f;
    _passingComplex.driveY = self.screenTransaction * .5f;

    //: _voiceImageViewleft.width = 62;
    _earlier.suspendMerge = 62;
    //: _voiceImageViewleft.height = 18;
    _earlier.screenTransaction = 18;
    //: _voiceImageViewleft.centerY = self.height * .5f;
    _earlier.driveY = self.screenTransaction * .5f;

    //: _voicePlayView.width = 16;
    _range.suspendMerge = 16;
    //: _voicePlayView.height = 16;
    _range.screenTransaction = 16;
    //: _voicePlayView.centerY = self.height * .5f;
    _range.driveY = self.screenTransaction * .5f;

    //: _voicePlayViewleft.width = 16;
    _playViewleftSingingVoice.suspendMerge = 16;
    //: _voicePlayViewleft.height = 16;
    _playViewleftSingingVoice.screenTransaction = 16;
    //: _voicePlayViewleft.centerY = self.height * .5f;
    _playViewleftSingingVoice.driveY = self.screenTransaction * .5f;

    //: _durationLabel.centerY = _voiceImageView.centerY;
    _twentyFourHourPeriodLabel.driveY = _passingComplex.driveY;

    //: CGFloat backgroundWidth = 0;
    CGFloat backgroundWidth = 0;
    //: CGFloat backgroundLeft = 0;
    CGFloat backgroundLeft = 0;
    //: switch (self.layoutStyle) {
    switch (self.recognize) {
        //: case ClassFactoryLoaderLayoutLeft:
        case ClassFactoryLoaderLayoutLeft:
            {
                //: backgroundWidth = self.width - contentInsets.left * .5f - 2;
                backgroundWidth = self.suspendMerge - contentInsets.left * .5f - 2;
                //: backgroundLeft = contentInsets.left * .5f;
                backgroundLeft = contentInsets.left * .5f;
            }
            //: break;
            break;
        //: case ClassFactoryLoaderLayoutRight:
        case ClassFactoryLoaderLayoutRight:
            {
                //: backgroundWidth = self.width - 2 - contentInsets.right * .5f;
                backgroundWidth = self.suspendMerge - 2 - contentInsets.right * .5f;
                //: backgroundLeft = 2;
                backgroundLeft = 2;
            }
            //: break;
            break;
        //: default:
        default:
        {
            //: if (self.model.message.isOutgoingMsg) {
            if (self.angle.role.isOutgoingMsg) {
                //: backgroundWidth = self.width - 2 - contentInsets.right * .5f;
                backgroundWidth = self.suspendMerge - 2 - contentInsets.right * .5f;
                //: backgroundLeft = 2;
                backgroundLeft = 2;
            //: } else {
            } else {
                //: backgroundWidth = self.width - contentInsets.left * .5f - 2;
                backgroundWidth = self.suspendMerge - contentInsets.left * .5f - 2;
                //: backgroundLeft = contentInsets.left * .5f;
                backgroundLeft = contentInsets.left * .5f;
            }
            //: break;
            break;
        }
    }
    //: _audioBackgroundView.size = CGSizeMake(backgroundWidth,
    _elliptic.relational = CGSizeMake(backgroundWidth,
                                               //: self.height - 4);
                                               self.screenTransaction - 4);
    //: _audioBackgroundView.left = backgroundLeft;
    _elliptic.thePlayerThumb = backgroundLeft;
    //: _audioBackgroundView.top = 2;
    _elliptic.endue = 2;
}

//: - (void)playAudio:(NSString *)filePath didCompletedWithError:(NSError *)error
- (void)playAudio:(NSString *)filePath didCompletedWithError:(NSError *)error
{
    //: [self stopPlayingUI];
    [self phaseLate];
}

//: -(void)onTouchUpInside:(id)sender
-(void)presentationned:(id)sender
{
    //: if ([self.model.message attachmentDownloadState]== NIMMessageAttachmentDownloadStateFailed
    if ([self.angle.role attachmentDownloadState]== NIMMessageAttachmentDownloadStateFailed
        //: || [self.model.message attachmentDownloadState] == NIMMessageAttachmentDownloadStateNeedDownload) {
        || [self.angle.role attachmentDownloadState] == NIMMessageAttachmentDownloadStateNeedDownload) {
        //: [[[NIMSDK sharedSDK] chatManager] fetchMessageAttachment:self.model.message
        [[[NIMSDK sharedSDK] chatManager] fetchMessageAttachment:self.angle.role
                                                           //: error:nil];
                                                           error:nil];
        //: return;
        return;
    }
    //: if ([self.model.message attachmentDownloadState] == NIMMessageAttachmentDownloadStateDownloaded) {
    if ([self.angle.role attachmentDownloadState] == NIMMessageAttachmentDownloadStateDownloaded) {

        //: if ([[NIMSDK sharedSDK].mediaManager isPlaying]) {
        if ([[NIMSDK sharedSDK].mediaManager isPlaying]) {
            //: [self stopPlayingUI];
            [self phaseLate];
        }

        //: DecodeAtomicFormatterMigrate *event = [[DecodeAtomicFormatterMigrate alloc] init];
        DecodeAtomicFormatterMigrate *event = [[DecodeAtomicFormatterMigrate alloc] init];
        //: event.eventName = @"FFFKitEventNameTapAudio";
        event.drag = StringFromPossiblyData(k_ointmentContent);
        //: event.messageModel = self.model;
        event.theme = self.angle;
        //: [self.delegate onCatchEvent:event];
        [self.characterThroughoutted afterTingDeliver:event];

    }
}

//: - (void)refreshBackground:(ParcelReplayAngleCollectionMight *)data
- (void)time:(ParcelReplayAngleCollectionMight *)data
{
    //: if (data.shouldShowLeft)
    if (data.argument)
    {
        //: _voiceImageViewleft.hidden = NO;
        _earlier.hidden = NO;
        //: _voiceImageView.hidden = YES;
        _passingComplex.hidden = YES;
        //: _voicePlayViewleft.hidden = NO;
        _playViewleftSingingVoice.hidden = NO;
        //: _voicePlayView.hidden = YES;
        _range.hidden = YES;
    }
    //: else
    else
    {
//        _voiceImageView.image = [UIImage imageNamed:@"icon_receiver_voice_playing_w"];
        //: _voiceImageViewleft.hidden = YES;
        _earlier.hidden = YES;
        //: _voiceImageView.hidden = NO;
        _passingComplex.hidden = NO;
        //: _voicePlayViewleft.hidden = YES;
        _playViewleftSingingVoice.hidden = YES;
        //: _voicePlayView.hidden = NO;
        _range.hidden = NO;
    }
}

//: - (void)stopPlayAudio:(NSString *)filePath didCompletedWithError:(nullable NSError *)error
- (void)stopPlayAudio:(NSString *)filePath didCompletedWithError:(nullable NSError *)error
{
    //: [self stopPlayingUI];
    [self phaseLate];
}


//- (NSString *)convertToTimeStringWithTimeInterval:(NSTimeInterval)timeInterval{
//    NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeInterval];
//    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
//    [dateFormatter setDateFormat:@"HH:mm"];
//    NSString *dateStsring = [dateFormatter stringFromDate:date];
//    return dateStsring;
//}

//: @end
@end

Byte * PossiblyDataToCache(Byte *data) {
    int communicate = data[0];
    int laverJewel = data[1];
    int payerKid = data[2];
    if (!communicate) return data + payerKid;
    for (int i = 0; i < laverJewel / 2; i++) {
        int begin = payerKid + i;
        int end = payerKid + laverJewel - i - 1;
        Byte temp = data[begin];
        data[begin] = data[end];
        data[end] = temp;
    }
    data[0] = 0;
    data[payerKid + laverJewel] = 0;
    return data + payerKid;
}

NSString *StringFromPossiblyData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)PossiblyDataToCache(data)];
}  
