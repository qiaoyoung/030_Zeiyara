
#import <Foundation/Foundation.h>

NSString *StringFromMostlyData(Byte *data);


//: back_arrow_bl
Byte commonDipConfig[] = {32, 13, 13, 6, 65, 218, 111, 110, 112, 120, 108, 110, 127, 127, 124, 132, 108, 111, 121, 233};

//: contact_fragment_group
Byte screenTensionDevice[] = {5, 22, 49, 13, 159, 119, 160, 207, 206, 139, 208, 136, 204, 148, 160, 159, 165, 146, 148, 165, 144, 151, 163, 146, 152, 158, 150, 159, 165, 144, 152, 163, 160, 166, 161, 182};

//: #F6F6F6
Byte k_largelyViewPage[] = {88, 7, 7, 11, 227, 131, 47, 156, 1, 126, 189, 42, 77, 61, 77, 61, 77, 61, 238};

//: activity_wallet_zhuan
Byte k_visitorNumbereractionPage[] = {39, 21, 39, 6, 125, 60, 136, 138, 155, 144, 157, 144, 155, 160, 134, 158, 136, 147, 147, 140, 155, 134, 161, 143, 156, 136, 149, 147};

//: contact_fragment_friend
Byte kHourError[] = {69, 23, 90, 13, 60, 191, 127, 151, 143, 252, 220, 133, 87, 189, 201, 200, 206, 187, 189, 206, 185, 192, 204, 187, 193, 199, 191, 200, 206, 185, 192, 204, 195, 191, 200, 190, 109};

//: #EEEEEE
Byte styleCalmEvent[] = {72, 7, 60, 8, 11, 205, 169, 8, 95, 129, 129, 129, 129, 129, 129, 2};

//: #05AAF4
Byte screenCompletePreference[] = {44, 7, 99, 8, 92, 239, 71, 240, 134, 147, 152, 164, 164, 169, 151, 219};

//: #5D5F66
Byte screenFeministData[] = {63, 7, 46, 11, 35, 136, 133, 99, 212, 11, 3, 81, 99, 114, 99, 116, 100, 100, 111};

//: 已发送
Byte themeTallPath[] = {51, 9, 9, 7, 189, 94, 51, 238, 192, 187, 238, 152, 154, 242, 137, 138, 150};

//: group_info_activity_op_failed
Byte layoutCattleLogger[] = {30, 29, 11, 13, 15, 23, 198, 157, 117, 49, 186, 198, 64, 114, 125, 122, 128, 123, 106, 116, 121, 113, 122, 106, 108, 110, 127, 116, 129, 116, 127, 132, 106, 122, 123, 106, 113, 108, 116, 119, 112, 111, 24};

// __DEBUG__
// __CLOSE_PRINT__
//
//  MatchFactoryAgainstBuild.m
//  Zeiyara
//
//  Created by Yan Wang on 2025/2/8.
//  Copyright © 2025 Zeiyara. All rights reserved.
//

// __M_A_C_R_O__
//: #import "MatchFactoryAgainstBuild.h"
#import "MatchFactoryAgainstBuild.h"
//: #import "InsertReturnTreasureMask.h"
#import "InsertReturnTreasureMask.h"
//: #import "WorkbenchPleasantExpertAudioOutside.h"
#import "WorkbenchPleasantExpertAudioOutside.h"

//: @interface MatchFactoryAgainstBuild ()<UITableViewDataSource,UITableViewDelegate>
@interface MatchFactoryAgainstBuild ()<UITableViewDataSource,UITableViewDelegate>


//: @property (nonatomic ,assign) NSInteger sliderIndex;
@property (nonatomic ,assign) NSInteger expected;
//: @property (nonatomic,strong) UIButton *btngroup;
@property (nonatomic,strong) UIButton *receive;

//: @property(nonatomic, strong) UITableView *tableView;
@property(nonatomic, strong) UITableView *sort;
//: @property (nonatomic,strong) UIButton *btnfriend;
@property (nonatomic,strong) UIButton *logical;

//: @property (nonatomic ,strong) NSArray *groupArray;
@property (nonatomic ,strong) NSArray *secure;
//: @property (nonatomic ,strong) NSArray *friendArray;
@property (nonatomic ,strong) NSArray *strikeOpera;

//: @property (nonatomic,strong) UIImageView *topborder1;
@property (nonatomic,strong) UIImageView *language;
//: @property (nonatomic,strong) UIImageView *topborder2;
@property (nonatomic,strong) UIImageView *pop;


//: @end
@end

//: @implementation MatchFactoryAgainstBuild
@implementation MatchFactoryAgainstBuild

//: - (nullable UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
- (nullable UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    //: return [[UIView alloc] init];
    return [[UIView alloc] init];
}

//: - (NIMSession *)didGetSessionWithTeam:(id)team {
- (NIMSession *)to:(id)team {
    //: NIMTeam *teamItem = (NIMTeam *)team;
    NIMTeam *teamItem = (NIMTeam *)team;
    //: NIMSession *session = [NIMSession session:teamItem.teamId type:NIMSessionTypeTeam];
    NIMSession *session = [NIMSession session:teamItem.teamId type:NIMSessionTypeTeam];
    //: return session;
    return session;
}

//: -(void)sliderButtonClick:(UIButton *)sender
-(void)remarked:(UIButton *)sender
{
    //: sender.selected = YES;
    sender.selected = YES;

    //: if(sender == self.btnfriend){
    if(sender == self.logical){
        //: _btnfriend.backgroundColor = [UIColor colorWithHexString:@"#05AAF4"];
        _logical.backgroundColor = [UIColor distinctDown:StringFromMostlyData(screenCompletePreference)];
        //: _btngroup.backgroundColor = [UIColor clearColor];
        _receive.backgroundColor = [UIColor clearColor];
        //: [_btngroup setTitleColor:[UIColor colorWithHexString:@"#5D5F66"] forState:UIControlStateNormal];
        [_receive setTitleColor:[UIColor distinctDown:StringFromMostlyData(screenFeministData)] forState:UIControlStateNormal];
        //: [_btnfriend setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [_logical setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

    //: }else if (sender == self.btngroup){
    }else if (sender == self.receive){
        //: _btngroup.backgroundColor = [UIColor colorWithHexString:@"#05AAF4"];
        _receive.backgroundColor = [UIColor distinctDown:StringFromMostlyData(screenCompletePreference)];
        //: _btnfriend.backgroundColor = [UIColor clearColor];
        _logical.backgroundColor = [UIColor clearColor];
        //: [_btnfriend setTitleColor:[UIColor colorWithHexString:@"#5D5F66"] forState:UIControlStateNormal];
        [_logical setTitleColor:[UIColor distinctDown:StringFromMostlyData(screenFeministData)] forState:UIControlStateNormal];
        //: [_btngroup setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [_receive setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

    }

    //: _sliderIndex = sender.tag;
    _expected = sender.tag;
    //: [_tableView reloadData];
    [_sort reloadData];

}

//: -(void)viewWillDisappear:(BOOL)animated{
-(void)viewWillDisappear:(BOOL)animated{
    //: [super viewWillDisappear:animated];
    [super viewWillDisappear:animated];
    //: [self.navigationController.navigationBar setHidden:NO];
    [self.navigationController.navigationBar setHidden:NO];

}

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: self.view.backgroundColor = [UIColor whiteColor];
    self.view.backgroundColor = [UIColor whiteColor];

    //: UIView *navView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, (44.0f + [UIDevice vg_statusBarHeight])+64)];
    UIView *navView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, (44.0f + [UIDevice cart])+64)];
    //: [self.view addSubview:navView];
    [self.view addSubview:navView];

    //: UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    //: backButton.frame = CGRectMake(5, [UIDevice vg_statusBarHeight]+4, 40, 40);
    backButton.frame = CGRectMake(5, [UIDevice cart]+4, 40, 40);
    //: [backButton setImage:[UIImage imageNamed:@"back_arrow_bl"] forState:(UIControlStateNormal)];
    [backButton setImage:[UIImage imageNamed:StringFromMostlyData(commonDipConfig)] forState:(UIControlStateNormal)];
    //: [backButton addTarget:self action:@selector(backAction) forControlEvents:UIControlEventTouchUpInside];
    [backButton addTarget:self action:@selector(bodyPart) forControlEvents:UIControlEventTouchUpInside];
    //: [navView addSubview:backButton];
    [navView addSubview:backButton];

    //: UILabel *labtitle = [[UILabel alloc] initWithFrame:CGRectMake(([[UIScreen mainScreen] bounds].size.width-200)/2, [UIDevice vg_statusBarHeight]+4, 200, 40)];
    UILabel *labtitle = [[UILabel alloc] initWithFrame:CGRectMake(([[UIScreen mainScreen] bounds].size.width-200)/2, [UIDevice cart]+4, 200, 40)];
    //: labtitle.font = [UIFont systemFontOfSize:16.f];
    labtitle.font = [UIFont systemFontOfSize:16.f];
    //: labtitle.textColor = [UIColor blackColor];
    labtitle.textColor = [UIColor blackColor];
    //: labtitle.textAlignment = NSTextAlignmentCenter;
    labtitle.textAlignment = NSTextAlignmentCenter;
    //: labtitle.text = [ViaPrimaryFacade getTextWithKey:@"activity_wallet_zhuan"];
    labtitle.text = [ViaPrimaryFacade engine:StringFromMostlyData(k_visitorNumbereractionPage)];
    //: [navView addSubview:labtitle];
    [navView addSubview:labtitle];

    //: UIView *topview = [[UIView alloc]initWithFrame:CGRectMake(15, (44.0f + [UIDevice vg_statusBarHeight])+8, [[UIScreen mainScreen] bounds].size.width-30, 48)];
    UIView *topview = [[UIView alloc]initWithFrame:CGRectMake(15, (44.0f + [UIDevice cart])+8, [[UIScreen mainScreen] bounds].size.width-30, 48)];
    //: topview.backgroundColor = [UIColor colorWithHexString:@"#F6F6F6"];
    topview.backgroundColor = [UIColor distinctDown:StringFromMostlyData(k_largelyViewPage)];
    //: topview.layer.cornerRadius = 24;
    topview.layer.cornerRadius = 24;
    //: [self.view addSubview:topview];
    [self.view addSubview:topview];

    //: CGFloat width = ([[UIScreen mainScreen] bounds].size.width-30-12)/2;
    CGFloat width = ([[UIScreen mainScreen] bounds].size.width-30-12)/2;

    //: _btnfriend = [UIButton buttonWithType:UIButtonTypeCustom];
    _logical = [UIButton buttonWithType:UIButtonTypeCustom];
    //: _btnfriend.frame = CGRectMake(6, 6, width, 36);
    _logical.frame = CGRectMake(6, 6, width, 36);
    //: _btnfriend.backgroundColor = [UIColor colorWithHexString:@"#05AAF4"];
    _logical.backgroundColor = [UIColor distinctDown:StringFromMostlyData(screenCompletePreference)];
    //: _btnfriend.layer.cornerRadius = 18;
    _logical.layer.cornerRadius = 18;
    //: _btnfriend.tag = 0;
    _logical.tag = 0;
    //: _btnfriend.titleLabel.font = [UIFont systemFontOfSize:14];
    _logical.titleLabel.font = [UIFont systemFontOfSize:14];
    //: [_btnfriend setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [_logical setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    //: [_btnfriend setTitle:[ViaPrimaryFacade getTextWithKey:@"contact_fragment_friend"] forState:UIControlStateNormal];
    [_logical setTitle:[ViaPrimaryFacade engine:StringFromMostlyData(kHourError)] forState:UIControlStateNormal];
    //: [_btnfriend addTarget:self action:@selector(sliderButtonClick:) forControlEvents:UIControlEventTouchUpInside];
    [_logical addTarget:self action:@selector(remarked:) forControlEvents:UIControlEventTouchUpInside];
    //: [topview addSubview:_btnfriend];
    [topview addSubview:_logical];

    //: _btngroup = [UIButton buttonWithType:UIButtonTypeCustom];
    _receive = [UIButton buttonWithType:UIButtonTypeCustom];
    //: _btngroup.frame = CGRectMake(width+6, 6, width, 36);
    _receive.frame = CGRectMake(width+6, 6, width, 36);
    //: _btngroup.tag = 1;
    _receive.tag = 1;
    //: _btngroup.layer.cornerRadius = 18;
    _receive.layer.cornerRadius = 18;
    //: _btngroup.titleLabel.font = [UIFont systemFontOfSize:14];
    _receive.titleLabel.font = [UIFont systemFontOfSize:14];
    //: [_btngroup setTitleColor:[UIColor colorWithHexString:@"#5D5F66"] forState:UIControlStateNormal];
    [_receive setTitleColor:[UIColor distinctDown:StringFromMostlyData(screenFeministData)] forState:UIControlStateNormal];
    //: [_btngroup setTitle:[ViaPrimaryFacade getTextWithKey:@"contact_fragment_group"] forState:UIControlStateNormal];
    [_receive setTitle:[ViaPrimaryFacade engine:StringFromMostlyData(screenTensionDevice)] forState:UIControlStateNormal];
    //: [_btngroup addTarget:self action:@selector(sliderButtonClick:) forControlEvents:UIControlEventTouchUpInside];
    [_receive addTarget:self action:@selector(remarked:) forControlEvents:UIControlEventTouchUpInside];
    //: [topview addSubview:_btngroup];
    [topview addSubview:_receive];

    //: UIView *lineview = [[UIView alloc]initWithFrame:CGRectMake(0, topview.bottom+8, [[UIScreen mainScreen] bounds].size.width, 1)];
    UIView *lineview = [[UIView alloc]initWithFrame:CGRectMake(0, topview.tableGame+8, [[UIScreen mainScreen] bounds].size.width, 1)];
    //: lineview.backgroundColor = [UIColor colorWithHexString:@"#EEEEEE"];
    lineview.backgroundColor = [UIColor distinctDown:StringFromMostlyData(styleCalmEvent)];
    //: [navView addSubview:lineview];
    [navView addSubview:lineview];

    //: [self.view addSubview:self.tableView];
    [self.view addSubview:self.sort];
    //: _sliderIndex = 0;
    _expected = 0;
    //: [self prepareData];
    [self kit];
}

//: - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    //: return 64;
    return 64;
}

//: - (void)viewWillAppear:(BOOL)animated{
- (void)viewWillAppear:(BOOL)animated{
    //: [super viewWillAppear:animated];
    [super viewWillAppear:animated];
    //: [self.navigationController.navigationBar setHidden:YES];
    [self.navigationController.navigationBar setHidden:YES];
}

//: - (void)backAction{
- (void)bodyPart{
    //: [self.navigationController popViewControllerAnimated:NO];
    [self.navigationController popViewControllerAnimated:NO];
}

//: #pragma mark - UITableViewDelegate
#pragma mark - UITableViewDelegate
//: - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //: [tableView deselectRowAtIndexPath:indexPath animated:YES];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    //: if(_sliderIndex <= 0){
    if(_expected <= 0){
        //: NIMUser *friend = self.friendArray[indexPath.section];
        NIMUser *friend = self.strikeOpera[indexPath.section];
        //: self.session = [NIMSession session:friend.userId type:NIMSessionTypeP2P];
        self.stroke = [NIMSession session:friend.userId type:NIMSessionTypeP2P];
    //: }else{
    }else{
        //: NIMTeam *team = self.groupArray[indexPath.section];
        NIMTeam *team = self.secure[indexPath.section];
        //: self.session = [NIMSession session:team.teamId type:NIMSessionTypeTeam];
        self.stroke = [NIMSession session:team.teamId type:NIMSessionTypeTeam];
    }

    //: NSError *err;
    NSError *err;
    //: if (self.isCard) {
    if (self.line) {
        //: [[[NIMSDK sharedSDK] chatManager] sendForwardMessage:self.message toSession:self.session error:&err];
        [[[NIMSDK sharedSDK] chatManager] sendForwardMessage:self.appropriate toSession:self.stroke error:&err];
    //: }else{
    }else{
        //: [[[NIMSDK sharedSDK] chatManager] forwardMessage:self.message toSession:self.session error:&err];
        [[[NIMSDK sharedSDK] chatManager] forwardMessage:self.appropriate toSession:self.stroke error:&err];
    }


    //: if(!err){
    if(!err){
        //: [self.view makeToast:@"已发送".nim_localized duration:1.0 position:CSToastPositionCenter title:nil image:nil style:nil completion:^(BOOL didTap) {
        [self.view beaconTwenty:StringFromMostlyData(themeTallPath).ignore aproposTimeCounterval:1.0 reach:commonMobileForwardTitle canvasProvider:nil ringOfColor:nil stopAmong:nil timingGravity:^(BOOL didTap) {
            //: [self.navigationController popViewControllerAnimated:NO];
            [self.navigationController popViewControllerAnimated:NO];
        //: }];
        }];
    //: }else{
    }else{
        //: [self.view makeToast:[ViaPrimaryFacade getTextWithKey:@"group_info_activity_op_failed"] duration:2.0 position:CSToastPositionCenter];
        [self.view trim:[ViaPrimaryFacade engine:StringFromMostlyData(layoutCattleLogger)] iniquity:2.0 bubble:commonMobileForwardTitle];
    }

}

//: - (nullable UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
- (nullable UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    //: return [[UIView alloc] init];
    return [[UIView alloc] init];
}
//: - (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    //: return 0.01f;
    return 0.01f;
}
//: - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //: return 1;
    return 1;
}
//: - (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    //: return 0.01f;
    return 0.01f;
}
//: - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    //: InsertReturnTreasureMask *cell = [InsertReturnTreasureMask cellWithTableView:tableView];
    InsertReturnTreasureMask *cell = [InsertReturnTreasureMask start:tableView];
    //        cell.delegate = self;
    //: if (_sliderIndex <= 0) {
    if (_expected <= 0) {
        //: NIMUser *user = self.friendArray[indexPath.section];
        NIMUser *user = self.strikeOpera[indexPath.section];
        //: [cell reloadUserItem:user];
        [cell user:user];
    //: }else{
    }else{
        //: NIMTeam *team = self.groupArray[indexPath.section];
        NIMTeam *team = self.secure[indexPath.section];
        //: [cell refreshTeam:team];
        [cell overload:team];
    }
    //: return cell;
    return cell;
}
//: - (void)prepareData
- (void)kit
{
    //: self.friendArray = [NIMSDK sharedSDK].userManager.myFriends;
    self.strikeOpera = [NIMSDK sharedSDK].userManager.myFriends;
    //: self.groupArray = [NIMSDK sharedSDK].teamManager.allMyTeams;
    self.secure = [NIMSDK sharedSDK].teamManager.allMyTeams;

    //: [self.tableView reloadData];
    [self.sort reloadData];
}
//: #pragma mark - UITableViewDataSource
#pragma mark - UITableViewDataSource
//: - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    //: if (_sliderIndex <= 0) {
    if (_expected <= 0) {
        //: return self.friendArray.count;
        return self.strikeOpera.count;
    //: }else{
    }else{
        //: return self.groupArray.count;
        return self.secure.count;
    }
}

//: - (UITableView *)tableView {
- (UITableView *)sort {
    //: if (!_tableView) {
    if (!_sort) {
        //: _tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, (44.0f + [UIDevice vg_statusBarHeight])+64, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height-(44.0f + [UIDevice vg_statusBarHeight])-64) style:UITableViewStyleGrouped];
        _sort = [[UITableView alloc] initWithFrame:CGRectMake(0, (44.0f + [UIDevice cart])+64, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height-(44.0f + [UIDevice cart])-64) style:UITableViewStyleGrouped];
        //: _tableView.delegate = self;
        _sort.delegate = self;
        //: _tableView.dataSource = self;
        _sort.dataSource = self;
        //: _tableView.backgroundColor = [UIColor clearColor];
        _sort.backgroundColor = [UIColor clearColor];
        //: _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
        _sort.separatorStyle = UITableViewCellSeparatorStyleNone;
    }
    //: return _tableView;
    return _sort;
}

//: @end
@end

Byte * MostlyDataToCache(Byte *data) {
    int listSuspicion = data[0];
    int straightPeal = data[1];
    Byte halfFeminist = data[2];
    int fractionSceneSimple = data[3];
    if (!listSuspicion) return data + fractionSceneSimple;
    for (int i = fractionSceneSimple; i < fractionSceneSimple + straightPeal; i++) {
        int value = data[i] - halfFeminist;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[fractionSceneSimple + straightPeal] = 0;
    return data + fractionSceneSimple;
}

NSString *StringFromMostlyData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)MostlyDataToCache(data)];
}
